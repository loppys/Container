## Конфиг


 # Ссылки #

 - `@` в начале имени является указанием ссылки. ()
 - `~` указывает на singleton (такие сервисы будет запрещено вызывать через getNew() - создаёт новый экземпляр сервиса)
 - `#` в начале имени является ссылкой на путь до директории/файла.
 - Можно использовать вложенные ссылки: ['`@`paths' => '`#`root'] В таком случае будет обращение к элементу `#root` внутри `@`paths
 (`#`sysmod - vendor/vengine-modules. `#`core - vendor/vengine/core, `#`usermod - #root/Modules, `#`root - DOCUMENT_ROOT)

P.S. ссылки могут хранить в себе несколько сервисов, по сути это список сервисов. 
Но если будут обнаружены зарезервированные параметры в указанном списке, то такая ссылка будет считаться одиночной (будет создана по правилам обычного сервиса).

Зарезервированные параметры можно прочитать ниже.

 # Параметры: #

 - `autoDependencies` отвечает за подхват зависимостей вместе с указанными параметрами (по умолчанию `true`).
 Если параметр имеет значение `false`, то в конструктор и указанные методы будут прокидываться только указанные параметры.
 - `shared` Отвечает за сохранение результата. Ссылки не могут использовать параметр. По умолчанию `true`. (сервис без данного параметра будет каждый раз создаваться с нуля.. Исключение -  @@)
 - `sharedName` Дополнительное наименование сервиса (по умолчанию берется только имя класса).
 - `aliases` содержит массив с интерфейсами, при вызове которых будет вызван класс сервиса.
 В случае, когда у нескольких сервисов будет один интерфейс, то в таком случае будет вызван первый найденный сервис.
 - `additionalParams` функция, которая принимает дополнительные параметры сервиса (массив с параметрами). 
(указанные параметры будут полностью заменены, либо добавлены к текущим параметрам.. Данный параметр является приоритетным при сборке конфига (будет подключен одним из первых))
 - `closure` функция для создания сервиса, если будет указана, то создание будет только через через неё, игнорируя все остальные методы создания.
 - `createArguments` параметры, которые будут переданы в функцию создания, если не указано, то будет передан экземпляр `Container`.
 Так же может принимать значение `false`, в таком случае никакие параметры не будут переданы.
 - `constructArguments` передаваемые параметры в конструктор и если было указано в рамках метода, то будет передано в метод.
 - `class` класс сервиса.
 - `methods` методы, которые будут вызваны после создания сервиса. (так же может использовать авто-подхват зависимостей - нужно использовать массив в качестве значения (ключ - это имя метода), который будет обработан как `calls`)
 - `calls` описание вызовов сервиса.
 - `firstMethodCall` указывает на метод/методы (можно использовать строку и массив), который будет вызван исключительно при первом создании сервиса *(Если указано несколько методов, то они будут выполнятся в том порядке, в котором элементы расположены в массиве)
 - `absoluteName` название, которое будет использоваться при сохранении сервиса. (является приоритетным параметром, который будет перекрывать вообще все остальные имена сервиса)
 - `types` Используется для указания точного типа параметра (Пример: ['paramName' => 'string']). mixed будет пропущено.
 Так же поддерживаются ссылки.
 - `cache` Отвечает за кэширование собранного сервиса (кэшируется собранная структура: Подключенные сервисы и вызываемые методы с их параметрами).
 По умолчанию `true`.
 - `config` путь до конфига, который будет подключен.
 - `saveStruct` указывает на конкретные параметры, которые требуется обязательно сохранить (путь до параметра прописывается через `точку`, если искомый параметр находится в рамках других параметров)
 - `dontSaveStruct` тоже самое что и `saveStruct`, но имеет обратный эффект
 - `properties` заполняет указанные свойства данными (массив. ключ - имя свойства)
 - `value` Значение, при указании которого будет игнорироваться всё остальное, а указанное значение будет использоваться всегда при создании и получении сервиса
- `onlyNew` - создание данного сервиса будет каждый вызов с нуля

 # Разделы #
 - `configs` (необязательный) - раздел, который содержит конфиги (будет подключено в первую очередь). Имеет 2 подраздела: Global - будет сохранено, Local - используется только в рамках `app.config` (Local кэшируется как есть без преобразований, т.е. Local конфиг собирается каждый раз с нуля, в тоже время Global кэшируется преобразованным и при новом вызове не собирается с нуля, а использует уже собранные параметры)
 - `services`
 - `paths` - хранит все пути (могут принимать только 2 параметр `create` и `value`). (подключается самым первым)
 - `packages` - пути до `Package` модуля/расширения/чего-угодно. Имеет констуркцию: ['основной путь' => 'директория'].
 Так же один путь может принимать массив, который будет восприниматься как несколько директорий.
 ['основной путь' => ['первый', 'второй']]. В `'основной путь'` так же можно использовать ссылки.


 # Модификация конфига #

 1. Использовать теже пути, что и в изначальном конфиге (например - configs->Global->user.app.config)
 2. Все указанные параметры в локальном app.config будут учтены (добавлены или заменены). В приоритете локальный конфиг.
 3. Некоторые сервисы невозможно переопределить стандартным способом (например ServiceBuilder, т.к. стандартный путем такие сервисы не создаются).
 Сервисы, которые не поддаются локальной выноске будут создаваться в качестве нового сервиса из-за чего могут возникнуть ошибки.

 # Пример сохраненного конфига #

```php
Изначальный конфиг:

'services' => [
    '@example.class' => [
        'calls' => [
            'class' => Example::class,
            'properties' => [
                'test' => true,
            ],
        ]
    ],
    '@example.properties' => [
        'create' => static function () {
            return [
                'test' => true,
            ];
        },
        'createParams' => false,
    ],
    'app' => [
        'calls' => [
            'class' => App::class,
            'createParams' => [
                'example' => '@example.class'
            ],
            'properties' => '@example.properties'
        ],
    ],
]
```

```php
Готовый конфиг (готовый к кэшированию):

'services' => [
    'app' => [
        'calls' => [
            'class' => App::class,
            'createParams' => [
                'example' => [
                    'calls' => [
                        'class' => Example::class,
                        'properties' => [
                            'test' => true,
                        ],
                    ]
                ],
            ],
            'properties' => [
                'test' => true,
            ]
        ]
    ],
]
```

!!! Некоторый функционал находится на стадии реализаци и недоступен на текущий момент.